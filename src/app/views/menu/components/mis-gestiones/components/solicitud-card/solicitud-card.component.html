<div class="solicitud-card" (click)="onCardClick()">
  <div class="solicitud-header">
    <div class="articulo-preview">
      <div class="articulo-imagen">
        <img
          *ngIf="getImagenSrc()"
          [src]="getImagenSrc()"
          [alt]="solicitud.nombreArticulo"
        />
        <div *ngIf="!getImagenSrc()" class="imagen-placeholder">
          <i class="pi pi-image" aria-hidden="true"></i>
        </div>
      </div>
      <div class="articulo-info">
        <h4 class="articulo-titulo" [title]="solicitud.nombreArticulo">
          {{ solicitud.nombreArticulo }}
        </h4>
        <div class="articulo-meta flex-row" style="align-items: center">
          <span class="tipo-vista">
            {{ getTipoLabel() }}
          </span>
          <span class="fecha">
            <i class="pi pi-calendar" aria-hidden="true"></i>
            {{ getFechaFormateada() }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="solicitud-body">
    <div class="usuario-info">
      <div class="usuario-avatar">
        <img
          *ngIf="getAvatarSrc()"
          [src]="getAvatarSrc()"
          [alt]="solicitud.solicitante.nombre || 'Usuario'"
        />
        <span *ngIf="!getAvatarSrc()" class="iniciales">
          {{ (solicitud.solicitante.nombre ? solicitud.solicitante.nombre.charAt(0) : 'U') | uppercase }}
        </span>
      </div>
      <div class="usuario-details">
        <span class="usuario-nombre">
          {{ solicitud.solicitante.nombre || 'Usuario' }}
        </span>
        <span class="solicitud-tipo">
          <i [class]="getTipoIcon()" aria-hidden="true"></i>
          {{ esRecibida ? "Te solicita" : "Solicitaste" }}
          {{ getTipoLabel().toLowerCase() }}
        </span>
      </div>
    </div>

    <div class="mensaje">
      <p>{{ solicitud.mensaje }}</p>
    </div>

    <div class="solicitud-footer">
      <div class="footer-left">
        <span class="categoria">
          <i class="pi pi-tag" aria-hidden="true"></i>
          {{ solicitud.categoriaNombre }}
        </span>
      </div>

      <div class="footer-right">
        <div class="tipo-transaccion">
          <i [class]="getTipoIcon()" aria-hidden="true"></i>
          {{ getTipoLabel() }}
        </div>
        <div class="estado-badge" [ngClass]="getEstadoClass()">
          {{ getEstadoLabel() }}
        </div>
      </div>
    </div>
  </div>
</div>
