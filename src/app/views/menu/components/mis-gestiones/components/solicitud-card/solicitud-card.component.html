<div class="solicitud-card" (click)="onCardClick()">
  <div class="solicitud-header">
    <div class="articulo-preview">
      <div class="articulo-imagen">
        <img
          *ngIf="getImagenSrc()"
          [src]="getImagenSrc()"
          [alt]="solicitud?.nombreArticulo || 'Imagen del artÃ­culo'"
          class="articulo-imagen"
        />
        <div *ngIf="!getImagenSrc()" class="imagen-placeholder">
          <i class="pi pi-image" aria-hidden="true"></i>
        </div>
      </div>
      <div class="articulo-info">
        <h4 class="articulo-titulo" [title]="solicitud?.nombreArticulo">
          {{ solicitud?.nombreArticulo }}
        </h4>
        <div class="articulo-meta flex-row" style="align-items: center">
          <span class="fecha">
            <i class="pi pi-calendar" aria-hidden="true"></i>
            {{ getFechaFormateada() }}
          </span>
          <span 
            *ngIf="mostrarPrecio" 
            class="precio"
          >
            <i class="pi pi-dollar" aria-hidden="true"></i>
            {{ getPrecioFormateado() }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="solicitud-body">
    <div class="usuario-info">
      <div class="usuario-avatar">
        <ng-container *ngIf="getAvatarSrc(); else initialsTemplate">
          <img
            [src]="getAvatarSrc()"
            [alt]="solicitud?.solicitante?.nombre || 'Usuario'"
            class="avatar-img"
          />
        </ng-container>
        <ng-template #initialsTemplate>
          <span class="iniciales">
            {{ getUsuarioIniciales() }}
          </span>
        </ng-template>
      </div>
      <div class="usuario-details">
        <span class="usuario-nombre">
          {{ solicitud?.solicitante?.nombre || 'Usuario' }}
        </span>
      </div>
    </div>

    <div class="mensaje">
      <p>{{ solicitud?.mensaje }}</p>
    </div>

    <div class="solicitud-footer">
      <div class="footer-left">
        <span class="categoria-badge">
          <i class="pi pi-tag" aria-hidden="true"></i>
          {{ solicitud?.categoriaNombre }}
        </span>
      </div>

      <div class="footer-right">
        <div class="tipo-badge">
          <i [class]="getTipoIcon()" aria-hidden="true"></i>
          {{ getTipoLabel() | uppercase }}
        </div>
        <div class="estado-badge" [ngClass]="getEstadoClass()">
          {{ getEstadoLabel() }}
        </div>
      </div>
    </div>
  </div>
</div>
