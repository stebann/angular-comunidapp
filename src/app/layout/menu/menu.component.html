<aside class="sidebar" [class.sidebar-collapsed]="isCollapsed">
  <nav class="sidebar-nav">
    <ul class="nav-list">
      <ng-container *ngFor="let item of _menuItems">
        <li class="nav-item" [class.has-children]="item.children?.length">
          <!-- Parent menu item -->
          <a
            [routerLink]="item.children?.length ? null : ['/app', item.ruta]"
            [routerLinkActive]="!item.children?.length ? 'active' : ''"
            [routerLinkActiveOptions]="{ exact: true }"
            class="nav-link"
            [class.parent-active]="isItemActive(item)"
            [title]="item.nombre"
            (click)="onMenuItemClick(item, $event)"
          >
            <i [class]="item.icono"></i>
            <span *ngIf="!isCollapsed" class="menu-text">{{
              item.nombre
            }}</span>
            <i
              *ngIf="item.children?.length && !isCollapsed"
              class="fas fa-chevron-down expand-icon"
              [class.rotate]="item.expanded"
            ></i>
          </a>

          <!-- Submenu -->
          <ul
            *ngIf="item.children?.length && (item.expanded || isCollapsed)"
            class="sub-nav-list"
            [class.show]="item.expanded && !isCollapsed"
          >
            <li class="nav-item" *ngFor="let child of item.children">
              <a
                [routerLink]="['/app', child.ruta]"
                [class.active]="child.active"
                class="nav-link sub-nav-link"
                [title]="child.nombre"
                (click)="onMenuItemClick(child, $event)"
              >
                <i [class]="child.icono"></i>
                <span *ngIf="!isCollapsed" class="menu-text">{{
                  child.nombre
                }}</span>
              </a>
            </li>
          </ul>
        </li>
      </ng-container>
    </ul>
  </nav>

  <div class="sidebar-footer">
    <img
      src="assets/fondos/logotipo-sinfondo.png"
      alt="ComunidApp Logo"
      class="footer-logo"
      [class.small-logo]="isCollapsed"
    />
  </div>
</aside>
